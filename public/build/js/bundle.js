$((function(){$body=$("body");function e(e,t){var i=activeTabId.split("_")[0];$("#"+i+"_id_meliscms_tool_sites_script_exceptions").append('<div id="loader" class="overlay-loader"><img class="loader-icon spinning-cog" src="/MelisCore/assets/images/cog12.svg" data-cog="cog12"></div>'),$.ajax({type:"POST",url:"/melis/MelisCmsPageScriptEditor/MelisCmsPageScriptEditorToolSiteEdition/saveSiteScriptException",data:{siteId:i,operation:e,tool_site_mcse_page_id:t},dataType:"json",encode:!0}).done((function(e){$("#"+i+"_id_meliscms_tool_sites_script_exceptions #loader").remove(),e.success?(melisHelper.melisOkNotification(e.textTitle,e.textMessage),$("#"+i+"_id_meliscms_tool_sites_script_content").find("#"+i+"tool_site_exception_page_id").removeClass("tool-site-page-exception-error"),melisHelper.zoneReload(i+"_id_meliscms_tool_sites_script_exceptions","meliscms_tool_sites_script_exceptions",{siteId:i}),$("#"+i+"_id_meliscms_tool_sites_script_content").find("#"+i+"tool_site_exception_page_id").val("")):(melisHelper.melisKoNotification(e.textTitle,e.textMessage,e.errors),$("#"+i+"_id_meliscms_tool_sites_script_content").find("#"+i+"tool_site_exception_page_id").addClass("tool-site-page-exception-error"))})).fail((function(){alert(translations.tr_meliscore_error_message)}))}$body.on("click",".melis-cms-page-script-checkbox input[type=checkbox]",(function(){$(this).parent().find(".cbmask-inner").toggleClass("cb-active")})),$body.on("click",".btnDeletePageException",(function(t){var i=null,s=function(){var e=activeTabId.split("_")[0],t=null;$("#"+e+"MelisCmsPageScriptEditorScriptExceptionsTable").length>0&&(t=$("#"+e+"MelisCmsPageScriptEditorScriptExceptionsTable").DataTable());return t}(),o=$(this).parents("tr").attr("class");i="child"==o?s.row($(this).closest("tr").prev()[0]).data().mcse_page_id:s.row($(this).closest("tr")).data().mcse_page_id,melisCoreTool.confirm(translations.tr_meliscmspagescripteditor_common_label_yes,translations.tr_meliscmspagescripteditor_common_label_no,translations.tr_meliscmspagescripteditor_delete_exception_btn_tooltip,translations.tr_meliscmspagescripteditor_delete_exception_btn_confirm,(function(){e("delete",i)}))})),$body.on("click",".add_tool_site_script_exception_btn",(function(t){var i=activeTabId.split("_")[0];e("add",$("#"+i+"tool_site_exception_page_id").val())})),window.initSiteId=function(e){var t=activeTabId.split("_")[0];isNaN(t)||(e.siteId=t)}}));
